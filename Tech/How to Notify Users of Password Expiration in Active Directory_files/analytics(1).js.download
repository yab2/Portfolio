!(function(){"use strict";var g=function(i,o){for(var a=0;a<i.length;a++)o(i[a])},h=Object.assign||function(i){for(var o,a=1,u=arguments.length;a<u;a++){o=arguments[a];for(var d in o)Object.prototype.hasOwnProperty.call(o,d)&&(i[d]=o[d])}return i},s=window.document.currentScript,T=s.getAttribute("data-instance")||"AhrefsAnalytics",b=s.getAttribute("data-api")||new URL(s.src).origin+"/api/event",_=s.getAttribute("data-error")||new URL(s.src).origin+"/api/error",V=s.getAttribute("data-track-visibility")!=null,F=s.getAttribute("data-no-pageview-on-load")!=null,z=s.getAttribute("data-no-pageview-auto")!=null,E=window.location;function J(){try{var i=s.getAttribute("data-page-location");return i==null||i===""?E:i.startsWith("/")?new URL(i,E.origin):new URL(i)}catch(o){}return E}function K(i,o,a){var u=new XMLHttpRequest;u.open("POST",i,!0),u.setRequestHeader("Content-Type","text/plain"),u.send(o),u.onreadystatechange=function(){u.readyState===4&&a!=null&&a()}}function f(i){try{i()}catch(a){if(a instanceof Error)K(_,JSON.stringify({message:a.message,stack:a.stack}));else{var o="cannot-stringify-error";try{o=String(a)}catch(u){}K(_,JSON.stringify({message:o,stack:null}))}throw a}}function G(i){document.readyState==="loading"?window.addEventListener("DOMContentLoaded",function(){f(function(){return i()})}):i()}f(function(){function i(t,e){t&&console.warn("Ignoring Event: "+t),e&&e.callback&&e.callback()}function o(t,e){var n=J();if(/^localhost$|^127(\.[0-9]+){0,2}\.[0-9]+$|^\[::1?\]$/.test(n.hostname)||n.protocol==="file:")return i("localhost",e);if((window._phantom||window.__nightmare||window.navigator.webdriver||window.Cypress)&&!window.__web_analytics)return i(null,e);var r=s.getAttribute("data-key"),c=s.getAttribute("data-domain");if(r==null&&c==null)return i("missing data-key",e);var v;try{v=window.navigator.languages||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||window.navigator.systemLanguage}catch(m){}var w={},D=!1;try{for(var q=0;q<s.attributes.length;q++){var C=s.attributes[q];if(C.name.startsWith("data-prop-")){var I=C.name.substring(10),$=C.value;I&&$&&(w[I]=$,D=!0)}}}catch(m){}var R=null;try{R=document.title}catch(m){}var l={};l.n=t,l.u=n.href,v!=null&&(l.l=v),c!=null&&(l.d=c),r!=null&&(l.k=r),l.r=window.document.referrer||null,e&&e.meta&&(l.m=JSON.stringify(e.meta)),(e&&e.props||D)&&(l.p=JSON.stringify(h({},w,e==null?void 0:e.props)));var N;try{N=window.screen.width}catch(m){}N!=null&&(l.sw=N);var M;try{M=window.screen.height}catch(m){}M!=null&&(l.sh=M);var H;try{H=window.devicePixelRatio}catch(m){}return H!=null&&(l.sr=H),R!=null&&(l.t=R),l}function a(t,e){var n=o(t,e);if(n!=null){var r=new XMLHttpRequest;r.open("POST",b,!0),r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(n)),r.onreadystatechange=function(){r.readyState===4&&e&&e.callback&&e.callback({status:r.status})}}}function u(t,e){var n=navigator.sendBeacon!=null,r=o(t,e);if(r!=null){var c=JSON.stringify(r);if(n){var v=new Blob([c],{type:"text/plain"});navigator.sendBeacon(b,v)}else{var w=new XMLHttpRequest;w.open("POST",b,!0),w.setRequestHeader("Content-Type","text/plain"),w.send(c)}}}window[T]={sendEvent:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f(function(){a.apply(void 0,t)})}};var d;function y(){f(function(){var t=J();d!==t.href&&(d=t.href,a("pageview"))})}if(!z){var S=window.history;if(S.pushState){var Q=S.pushState;S.pushState=function(){Q.apply(this,arguments),y()},window.addEventListener("popstate",y)}F||(window.document.visibilityState==="prerender"?window.document.addEventListener("visibilitychange",function(){d||window.document.visibilityState!=="visible"||y()}):y())}V&&(document.addEventListener("visibilitychange",function(){f(function(){if(d==null){var t=document.visibilityState;t==="hidden"?u("x-visibilitychange-hidden"):t==="visible"&&u("x-visibilitychange-visible")}})}),document.addEventListener("pagehide",function(){f(function(){return u("x-pagehide")})}));var U=/\bAhrefsAnalytics\-prop\-([^\s\-]+)\-([^\s]+)/g;function A(t){if(t){var e=t.className;if(e){var n={};U.lastIndex=0;for(var r=null;r=U.exec(e);){var c=r[1],v=r[2];!c||!v||(n[c]=v)}if(Object.keys(n).length!==0)return n}}}function Y(t,e){if(!(e!=null&&e.defaultPrevented)&&!(e!=null&&e.type==="auxclick"&&e.button!==1)&&t&&t.href&&!(t.protocol==="data:"||t.protocol==="blob:"||t.protocol==="javascript:")){var n=A(t);u("x-link-click",{props:h({},n,{href:t.href}),meta:{metaKey:String(!!(e!=null&&e.metaKey)),ctrlKey:String(!!(e!=null&&e.ctrlKey)),shiftKey:String(!!(e!=null&&e.shiftKey))}})}}function Z(t){return!!t&&t instanceof HTMLAnchorElement&&!!t.href}function tt(t,e){if(!(e!=null&&e.defaultPrevented)&&t&&t.action){var n=A(t);u("x-form-submit",{props:h({},n,{action:t.action})})}}function j(t){return!!t&&t instanceof HTMLFormElement&&!!t.action}function B(t,e){var n=A(e);u(t,{props:n})}var W='*[class^="AhrefsAnalytics-event-"]',X=/\bAhrefsAnalytics\-event\-([^\s]+)/g;function L(t){if(!t||!(t instanceof HTMLElement)||!t.className)return[];var e=null,n=[];for(X.lastIndex=0;e=X.exec(t.className);){var r=e[1];r&&n.push(r)}return n}function et(t){return L(t).length>0}if(window.MutationObserver!=null){var k=function(t){if(!t.ahrefsAnalytics_click_tracked){t.ahrefsWebAnalytics_click_tracked=!0;var e=function(n){return f(function(){return Y(t,n)})};t.addEventListener("click",e),t.addEventListener("auxclick",e)}},O=function(t){if(!t.ahrefsAnalytics_submit_tracked){t.ahrefsWebAnalytics_submit_tracked=!0;var e=function(n){return f(function(){tt(t,n);for(var r=0,c=L(t);r<c.length;r++){var v=c[r];B(v,t)}})};t.addEventListener("submit",e)}},P=function(t){if(!j(t)&&!t.ahrefsAnalytics_event_tracked){t.ahrefsWebAnalytics_event_tracked=!0;var e=function(){f(function(){for(var n=0,r=L(t);n<r.length;n++){var c=r[n];B(c,t)}})};t.addEventListener("click",e)}},nt=new MutationObserver(function(t){f(function(){t.forEach(function(e){e.type==="childList"&&g(e.addedNodes,function(n){n.nodeType===Node.ELEMENT_NODE&&(Z(n)?k(n):n.querySelectorAll!=null&&g(n.querySelectorAll("a"),k),j(n)?O(n):n.querySelectorAll!=null&&g(n.querySelectorAll("form"),O),et(n)?P(n):n.querySelectorAll!=null&&g(n.querySelectorAll(W),P))})})})});G(function(){g(document.querySelectorAll("a"),k),g(document.querySelectorAll("form"),O),g(document.querySelectorAll(W),P),nt.observe(document.body,{childList:!0,subtree:!0})})}{var p=void 0,x=T+"-ready";typeof CustomEvent=="function"?p=new CustomEvent(x,{detail:null,bubbles:!0,cancelable:!0}):typeof document!="undefined"&&document.createEvent&&(p=document.createEvent("CustomEvent"),p.initCustomEvent(x,!0,!0,null)),p!=null&&typeof document!="undefined"&&(document.dispatchEvent?document.dispatchEvent(p):"fireEvent"in document&&document.fireEvent("on"+x,p))}})})();
