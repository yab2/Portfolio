(()=>{"use strict";window.addEventListener("load",(function(){var e=document.querySelector("#comments"),t=document.querySelector(".comment-form-author");if(null!=t&&(t.querySelector("input").addEventListener("input",(function(){t.querySelector("input").value?t.querySelector("label").style.display="none":t.querySelector("label").style.display="inline-flex"})),document.querySelector(".comment-form-email").querySelector("input").addEventListener("input",(function(){document.querySelector(".comment-form-email").querySelector("input").value?document.querySelector(".comment-form-email").querySelector("label").style.display="none":document.querySelector(".comment-form-email").querySelector("label").style.display="inline-flex"}))),null!=e){var o=function(){var e=!1;document.querySelectorAll(".comment-upvote, .comment-downvote").forEach((function(t){t.addEventListener("click",(function(){if(!e){e=!0;var o=t.classList.contains("comment-upvote")?"upvote":"downvote",n={action:"vote_comments",security:commentsObj.vote_comments,comment_id:t.closest(".comment").getAttribute("data-comment"),vote_type:o},r=new XMLHttpRequest;r.open("POST",commentsObj.ajaxurl,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),r.onload=function(){if(4==r.readyState&&200==r.status){var o=JSON.parse(r.responseText);!1!==o.net_vote&&(t.closest(".comment").querySelector("span.me-2").innerText=o.net_vote),e=!1}};var m="";for(var c in n)""!=m&&(m+="&"),m+=c+"="+encodeURIComponent(n[c]);r.send(m)}}))}))},n=function(){document.querySelectorAll(".comment-share").forEach((function(e){e.addEventListener("click",(function(){navigator.share&&navigator.share({title:e.getAttribute("data-comment-author"),text:e.getAttribute("data-comment-text"),url:e.getAttribute("data-comment-url")})}))}))},r=function(){document.querySelectorAll(".comment-content p").forEach((function(e){if(e.scrollHeight>e.clientHeight){var t=document.createElement("div");t.classList.add("show-more"),t.innerText="Show More",e.parentElement.appendChild(t),t.addEventListener("click",(function(){e.classList.add("comment-content-expanded"),t.style.display="none"}))}}))},m={action:"get_comments",security:commentsObj.get_comments,post_id:e.getAttribute("data-post-id")},c=new XMLHttpRequest;c.open("POST",commentsObj.ajaxurl,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),c.onload=function(){if(4==c.readyState&&200==c.status){if(null!=document.querySelector(".comment-has-info")){var t=window.localStorage,m=t.getItem("comment_form_name"),l=t.getItem("comment_form_email"),a=document.querySelector(".comment-form-author #author"),u=document.querySelector(".comment-form-email #email");m&&l&&(document.querySelector(".comment-has-info").style.display="block",document.querySelector(".comment-save-info").style.display="none",document.querySelector(".comment-form-author").style.display="none",document.querySelector(".comment-form-email").style.display="none",document.querySelector(".comment-has-info-name").innerHTML=m,a.value=m,u.value=l),document.querySelector(".comment-has-info-not").addEventListener("click",(function(e){document.querySelector(".comment-has-info").style.display="none",document.querySelector(".comment-save-info").style.display="flex",document.querySelector(".comment-form-author").style.display="flex",document.querySelector(".comment-form-email").style.display="flex"})),document.querySelector(".comment-save-info label").addEventListener("click",(function(e){document.querySelector(".comment-save-info label").classList.toggle("checked"),document.querySelector(".comment-save-info label").classList.contains("checked")?(t.setItem("comment_form_name",a.value),t.setItem("comment_form_email",u.value)):(t.removeItem("comment_form_name"),t.removeItem("comment_form_email"))}))}var i=document.querySelector(".comment-form-author");null!=i&&(i.querySelector("input").value?i.querySelector("label").style.display="none":i.querySelector("label").style.display="inline-flex",document.querySelector(".comment-form-email").querySelector("input").value?document.querySelector(".comment-form-email").querySelector("label").style.display="none":document.querySelector(".comment-form-email").querySelector("label").style.display="inline-flex");var s=JSON.parse(c.responseText);e.querySelector(".comments-list").insertAdjacentHTML("afterbegin",s),o(),n(),r()}};var l="";for(var a in m)""!=l&&(l+="&"),l+=a+"="+encodeURIComponent(m[a]);c.send(l);var u=document.querySelector("#sort-comments");u&&u.addEventListener("change",(function(){!function(t){var m={action:"get_comments_sorted_by_votes",security:commentsObj.sort_comments,post_id:e.getAttribute("data-post-id"),sort_option:t},c=new XMLHttpRequest;c.open("POST",commentsObj.ajaxurl,!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded;"),c.onload=function(){if(4==c.readyState&&200==c.status){var t=JSON.parse(c.responseText);e.querySelector(".comments-list").innerHTML=t.data.comments,o(),n(),r()}};var l="";for(var a in m)""!=l&&(l+="&"),l+=a+"="+encodeURIComponent(m[a]);c.send(l)}(u.value)})),r()}}))})()