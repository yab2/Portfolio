document.addEventListener('DOMContentLoaded',function(){const galleries=document.querySelectorAll('.fluent-gallery-wrapper');galleries.forEach(function(gallery){const featuredItems=gallery.querySelectorAll('.featured-item');const thumbnails=gallery.querySelectorAll('.thumbnail');const paginationDots=gallery.querySelectorAll('.pagination-dot');const prevBtn=gallery.querySelector('.nav-prev');const nextBtn=gallery.querySelector('.nav-next');const thumbnailsContainer=gallery.querySelector('.thumbnails-container');const thumbPrevBtn=gallery.querySelector('.thumb-prev');const thumbNextBtn=gallery.querySelector('.thumb-next');const enlargeBtn=gallery.querySelector('.enlarge-icon');const lightbox=gallery.querySelector('.gallery-zero-lightbox');const lightboxClose=gallery.querySelector('.lightbox-close');const lightboxImage=gallery.querySelector('.lightbox-image');const lightboxPrev=gallery.querySelector('.lightbox-prev');const lightboxNext=gallery.querySelector('.lightbox-next');const featuredImageWrapper=gallery.querySelector('.featured-image-wrapper');const featuredImages=gallery.querySelector('.featured-images');let currentIndex=0;function openLightbox(){if(lightbox&&lightboxImage){const currentImg=featuredItems[currentIndex].querySelector('img');if(currentImg){lightboxImage.src=currentImg.src;lightboxImage.alt=currentImg.alt;lightbox.classList.add('active')}}}
function updateGallery(index){featuredItems.forEach(function(item){item.classList.remove('active')});if(featuredItems[index]){featuredItems[index].classList.add('active')}
thumbnails.forEach(function(thumb){thumb.classList.remove('active')});if(thumbnails[index]){thumbnails[index].classList.add('active');thumbnails[index].scrollIntoView({behavior:'smooth',block:'nearest',inline:'center'})}
paginationDots.forEach(function(dot){dot.classList.remove('active')});if(paginationDots[index]){paginationDots[index].classList.add('active')}
if(lightbox&&lightbox.classList.contains('active')){const currentImg=featuredItems[index].querySelector('img');if(currentImg&&lightboxImage){lightboxImage.src=currentImg.src;lightboxImage.alt=currentImg.alt}}
currentIndex=index}
function nextSlide(){let nextIndex=currentIndex+1;if(nextIndex>=featuredItems.length){nextIndex=0}
updateGallery(nextIndex)}
function prevSlide(){let prevIndex=currentIndex-1;if(prevIndex<0){prevIndex=featuredItems.length-1}
updateGallery(prevIndex)}
if(prevBtn){prevBtn.addEventListener('click',function(e){e.preventDefault();prevSlide()})}
if(nextBtn){nextBtn.addEventListener('click',function(e){e.preventDefault();nextSlide()})}
if(thumbPrevBtn){thumbPrevBtn.addEventListener('click',function(e){e.preventDefault();if(thumbnailsContainer){thumbnailsContainer.scrollBy({left:-120,behavior:'smooth'})}})}
if(thumbNextBtn){thumbNextBtn.addEventListener('click',function(e){e.preventDefault();if(thumbnailsContainer){thumbnailsContainer.scrollBy({left:120,behavior:'smooth'})}})}
thumbnails.forEach(function(thumbnail,index){thumbnail.addEventListener('click',function(e){e.preventDefault();updateGallery(index)})});paginationDots.forEach(function(dot,index){dot.addEventListener('click',function(e){e.preventDefault();updateGallery(index)})});document.addEventListener('keydown',function(e){if(lightbox&&lightbox.classList.contains('active')){if(e.key==='ArrowLeft'){e.preventDefault();prevSlide()}else if(e.key==='ArrowRight'){e.preventDefault();nextSlide()}else if(e.key==='Escape'){e.preventDefault();lightbox.classList.remove('active')}}else{if(e.key==='ArrowLeft'){prevSlide()}else if(e.key==='ArrowRight'){nextSlide()}}});if(enlargeBtn&&lightbox){enlargeBtn.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();openLightbox()});if(lightboxClose){lightboxClose.addEventListener('click',function(e){e.preventDefault();lightbox.classList.remove('active')})}
if(lightboxPrev){lightboxPrev.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();prevSlide()})}
if(lightboxNext){lightboxNext.addEventListener('click',function(e){e.preventDefault();e.stopPropagation();nextSlide()})}
lightbox.addEventListener('click',function(e){if(e.target===lightbox||e.target===lightboxImage){lightbox.classList.remove('active')}})}
if(featuredImageWrapper&&lightbox){featuredImageWrapper.addEventListener('click',function(e){const target=e.target;if(target.closest('button')||target.closest('.nav-arrow')||target.closest('.enlarge-icon')){return}
openLightbox()})}
updateGallery(0)})})