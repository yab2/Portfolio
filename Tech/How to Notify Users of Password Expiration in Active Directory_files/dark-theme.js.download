"use strict";document.addEventListener("DOMContentLoaded",function(){const body=document.querySelector("body");var toggleButton=document.getElementById("darkmode-toggle");var darkModeKey="darkModeEnabled";var darkThemeLogo=theme_mods.darkThemeLogoUrl;var siteBranding=document.querySelectorAll(".custom-logo-link");var lightThemeLogo=siteBranding[1].innerHTML;var googleBadgeImages=document.querySelectorAll(".follow-more-news__google-preferred img, .sidebar-google-badge img");const isDarkModeEnabled=localStorage.getItem(darkModeKey)==="true";const isLightModeEnabled=localStorage.getItem(darkModeKey)==="false";const prefersDarkTheme=window.matchMedia("(prefers-color-scheme: dark)");function enableDarkMode(){body.classList.remove("light-mode");body.classList.add("dark-mode");localStorage.setItem(darkModeKey,"true");siteBranding.forEach(function(node){node.innerHTML=darkThemeLogo;node.firstChild.classList.add('custom-logo-dark')});googleBadgeImages.forEach(function(img){img.src=img.src.replace('-white.svg','.svg').replace('.svg.svg','.svg')})}
function disableDarkMode(){body.classList.remove("dark-mode");body.classList.add("light-mode");localStorage.setItem(darkModeKey,"false");siteBranding.forEach(function(node){node.innerHTML=lightThemeLogo});googleBadgeImages.forEach(function(img){if(!img.src.includes('-white.svg')){img.src=img.src.replace('.svg','-white.svg')}})}
function setDarkModeStateFromPreference(){if(prefersDarkTheme.matches){toggleButton.checked=!0;siteBranding.forEach(function(node){node.innerHTML=darkThemeLogo;node.firstChild.classList.add('custom-logo-dark')});googleBadgeImages.forEach(function(img){img.src=img.src.replace('-white.svg','.svg').replace('.svg.svg','.svg')})}else{toggleButton.checked=!1;siteBranding.forEach(function(node){node.innerHTML=lightThemeLogo});googleBadgeImages.forEach(function(img){if(!img.src.includes('-white.svg')){img.src=img.src.replace('.svg','-white.svg')}})}}
if(isDarkModeEnabled){enableDarkMode();toggleButton.checked=!0;siteBranding.forEach(function(node){node.innerHTML=darkThemeLogo;node.firstChild.classList.add('custom-logo-dark')});googleBadgeImages.forEach(function(img){img.src=img.src.replace('-white.svg','.svg').replace('.svg.svg','.svg')})}else if(isLightModeEnabled){body.classList.add("light-mode");toggleButton.checked=!1;siteBranding.forEach(function(node){node.innerHTML=lightThemeLogo});googleBadgeImages.forEach(function(img){if(!img.src.includes('-white.svg')){img.src=img.src.replace('.svg','-white.svg')}})}else if(prefersDarkTheme.matches){toggleButton.checked=!0;siteBranding.forEach(function(node){node.innerHTML=darkThemeLogo;node.firstChild.classList.add('custom-logo-dark')});googleBadgeImages.forEach(function(img){img.src=img.src.replace('-white.svg','.svg').replace('.svg.svg','.svg')})}
prefersDarkTheme.addEventListener("change",setDarkModeStateFromPreference);function handleDarkModeToggle(){if(!toggleButton.checked){disableDarkMode()}else{enableDarkMode()}}
toggleButton.addEventListener("click",handleDarkModeToggle)})